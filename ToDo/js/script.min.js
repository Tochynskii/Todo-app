const taskInput=document.querySelector(".input"),addBtn=document.querySelector(".addtask__add-btn"),todoList=document.querySelector(".todo-list");function addTask(t){t.preventDefault();const e=taskInput.value;if(e){const t=document.createElement("li");t.classList.add("todo-list__item");const o=document.createElement("button");o.classList.add("todo-list__check"),t.appendChild(o),o.addEventListener("click",()=>{o.classList.toggle("completed"),s.style.color="rgb(179, 179, 179)",s.style.textDecoration="line-through",todoList.appendChild(t),toStorage(),o.classList.contains("completed")||(s.style.color="#000",s.style.textDecoration="none")});const s=document.createElement("p");s.classList.add("todo-list__text"),s.innerText=e,t.appendChild(s);const d=document.createElement("button");d.classList.add("todo-list__btn-delete"),t.appendChild(d),todoList.insertBefore(t,todoList.firstChild),taskInput.value="",toStorage()}}function deleteTodo(t){const e=t.target;if("todo-list__btn-delete"===e.classList[0]){const t=e.parentElement;t.classList.add("delete"),setTimeout(()=>{t.classList.contains("delete")&&t.remove()},300),removeLocalTodo(t)}}function toStorage(){const t=document.querySelectorAll("li"),e=[];t.forEach(t=>{e.push({text:t.innerText,completed:t.children[0].classList.contains("completed")})}),localStorage.setItem("todos",JSON.stringify(e))}function getTodos(){let t;t=null===localStorage.getItem("todos")?[]:JSON.parse(localStorage.getItem("todos")),t.forEach(t=>{const e=document.createElement("li");e.classList.add("todo-list__item");const o=document.createElement("button");o.classList.add("todo-list__check"),e.appendChild(o),o.addEventListener("click",()=>{o.classList.toggle("completed"),s.style.color="rgb(179, 179, 179)",s.style.textDecoration="line-through",todoList.appendChild(e),toStorage(),o.classList.contains("completed")||(s.style.color="#000",s.style.textDecoration="none")});const s=document.createElement("p");s.classList.add("todo-list__text"),s.innerText=t.text,e.appendChild(s);const d=document.createElement("button");d.classList.add("todo-list__btn-delete"),e.appendChild(d),d.addEventListener("click",()=>{e.classList.add("delete"),setTimeout(()=>{e.classList.contains("delete")&&e.remove()},300)}),t.completed?(o.classList.add("completed"),s.style.color="rgb(179, 179, 179)",s.style.textDecoration="line-through"):(s.style.color="#000",s.style.textDecoration="none"),todoList.appendChild(e)})}function removeLocalTodo(t){let e;e=null===localStorage.getItem("todos")?[]:JSON.parse(localStorage.getItem("todos"));const o=e.map(t=>t.text);e.splice(o.indexOf(t.children[1].innerText),1),localStorage.setItem("todos",JSON.stringify(e))}addBtn.addEventListener("click",addTask),todoList.addEventListener("click",deleteTodo),document.addEventListener("DOMContentLoaded",getTodos);