const taskInput=document.querySelector(".input"),addBtn=document.querySelector(".addtask__add-btn"),todoList=document.querySelector(".todo-list");function getTodosFromApi(){return fetch("https://jsonplaceholder.typicode.com/users/1/todos").then(t=>t.json()).then(t=>{Array.isArray(t)?t.map(t=>{createTodoFromApi(t.title,t.completed)}):createTodoFromApi(t.title,t.completed)})}addBtn.addEventListener("click",addTask),todoList.addEventListener("click",deleteTodo),todoList.addEventListener("click",checked),document.addEventListener("DOMContentLoaded",getTodos),document.addEventListener("DOMContentLoaded",getTodosFromApi);const createTodoFromApi=(t,e)=>{const o=document.createElement("li");o.classList.add("todo-list__item"),o.classList.add("item-api");const s=document.createElement("button");s.classList.add("todo-list__check"),o.appendChild(s);const d=document.createElement("p");d.classList.add("todo-list__text"),d.innerText=t,o.appendChild(d);const n=document.createElement("button");n.classList.add("todo-list__btn-delete"),o.appendChild(n),todoList.appendChild(o),e&&(s.classList.add("completed"),o.style.borderColor="rgb(3, 190, 134)",d.style.color="gray",d.style.textDecoration="line-through")};function addTask(t){t.preventDefault();const e=taskInput.value;if(e){const t=document.createElement("li");t.classList.add("todo-list__item");const o=document.createElement("button");o.classList.add("todo-list__check"),t.appendChild(o);const s=document.createElement("p");s.classList.add("todo-list__text"),s.innerText=e,t.appendChild(s);const d=document.createElement("button");d.classList.add("todo-list__btn-delete"),t.appendChild(d),todoList.insertBefore(t,todoList.firstChild),taskInput.value="",toStorage()}}function checked(t){const e=t.target;if(e.classList.contains("todo-list__check")){const t=e.parentElement;e.classList.toggle("completed"),e.classList.contains("completed")?(t.style.borderColor="rgb(3, 190, 134)",t.children[1].style.textDecoration="line-through",t.children[1].style.color="gray"):(t.style.borderColor="rgb(0, 142, 216)",t.children[1].style.textDecoration="none",t.children[1].style.color="#000"),toStorage()}}function deleteTodo(t){const e=t.target;if(e.classList.contains("todo-list__btn-delete")){const t=e.parentElement;t.classList.add("delete"),setTimeout(()=>{t.classList.contains("delete")&&t.remove()},300),t.classList.contains("item-api")||removeLocalTodo(t)}}function toStorage(){const t=document.querySelectorAll("li"),e=[];t.forEach(t=>{t.classList.contains("item-api")||e.push({text:t.innerText,completed:t.children[0].classList.contains("completed")})}),localStorage.setItem("todos",JSON.stringify(e))}function getTodos(){let t;t=null===localStorage.getItem("todos")?[]:JSON.parse(localStorage.getItem("todos")),t.forEach(t=>{const e=document.createElement("li");e.classList.add("todo-list__item");const o=document.createElement("button");o.classList.add("todo-list__check"),e.appendChild(o);const s=document.createElement("p");s.classList.add("todo-list__text"),s.innerText=t.text,e.appendChild(s);const d=document.createElement("button");d.classList.add("todo-list__btn-delete"),e.appendChild(d),t.completed&&(o.classList.add("completed"),e.style.borderColor="rgb(3, 190, 134)",s.style.color="gray",s.style.textDecoration="line-through"),todoList.appendChild(e)})}function removeLocalTodo(t){let e;e=null===localStorage.getItem("todos")?[]:JSON.parse(localStorage.getItem("todos"));const o=e.map(t=>t.text);e.splice(o.indexOf(t.children[1].innerText),1),localStorage.setItem("todos",JSON.stringify(e))}